---
description: 执行架构设计阶段 - 生成多个方案、进行权衡分析、输出实施蓝图
argument-hint: (可选) 方案选择偏好
---

# /design - 架构设计阶段

执行端到端交付流程的第三阶段：架构设计。

**前置条件**: 必须先完成 Discovery 和 Exploration 阶段

## 使用方式

```bash
# 启动架构设计阶段
/design

# 指定方案偏好
/design "偏向最小变更方案"

# 从现有设计继续
/design --resume
```

## 阶段目标

提供高质量的架构设计方案和详细的实施蓝图。

## 工作流程

### 1. 设计准备
```markdown
## 设计准备

**输入**:
- 需求规格: [来自 discovery 阶段]
- 代码库分析: [来自 exploration 阶段]
- 约束条件: [已识别的约束]

**设计目标**:
- 功能完整
- 性能达标
- 可维护性强
- 实施可行
```

### 2. 方案生成

生成 3 个架构方案:

#### 方案 A: 最小变更方案
- 特点: 快速实施、风险低
- 适用: 小功能、时间紧迫
- 优势: 实施快速
- 劣势: 可能引入技术债务

#### 方案 B: 清晰架构方案
- 特点: 高可维护性
- 适用: 核心功能、长期维护
- 优势: 易于测试和扩展
- 劣势: 实施时间较长

#### 方案 C: 务实平衡方案
- 特点: 速度与质量平衡
- 适用: 大多数场景
- 优势: 实用的设计
- 劣势: 需要权衡

### 3. 权衡分析

对每个方案进行详细分析:
- 优势与劣势
- 技术风险评估
- 实施成本估算
- 长期影响分析

### 4. 推荐方案

基于以下因素给出推荐:
- 需求复杂度
- 时间压力
- 团队能力
- 长期规划

### 5. 实施蓝图

针对推荐方案输出详细蓝图:
- 组件设计
- 数据流设计
- 集成点
- 实施阶段
- 成功标准

## 阶段输出

```markdown
# [Feature Name] 架构设计

## 方案对比

### 方案 A: 最小变更方案
- 优势: ...
- 劣势: ...
- 实施成本: X 小时
- 技术风险: 低/中/高

### 方案 B: 清晰架构方案
- 优势: ...
- 劣势: ...
- 实施成本: X 小时
- 技术风险: 低/中/高

### 方案 C: 务实平衡方案
- 优势: ...
- 劣势: ...
- 实施成本: X 小时
- 技术风险: 低/中/高

## 推荐方案

**推荐**: 方案 X

**理由**:
1. 理由 1
2. 理由 2
3. 理由 3

## 实施蓝图

### 组件设计
- Component 1: [职责、接口、依赖]
- Component 2: [职责、接口、依赖]

### 数据流
[数据流图]

### 实施阶段
- 阶段 1: [任务]
- 阶段 2: [任务]
- 阶段 3: [任务]

### 成功标准
- [ ] 标准 1
- [ ] 标准 2
```

## 质量门禁

完成架构设计前，确认:
- [ ] 3 个方案已生成
- [ ] 权衡分析完成
- [ ] 推荐方案明确
- [ ] 实施蓝图详细
- [ ] 风险已识别
- [ ] 用户已确认方案

## 下一阶段

架构设计完成后，进入实施执行阶段:
```bash
/phase:implement
```
