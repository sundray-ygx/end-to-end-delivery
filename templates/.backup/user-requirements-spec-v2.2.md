**XXX版本用户需求规格说明书**

(内部文档,不得复制)

![](media/image1.png){width="2.5729166666666665in" height="0.9375in"}

深信服科技有限公司

**修订记录**

  ---------- ---------- ------------ ------------------------------------------------------
  修订版本   作者       日期         简要说明
  *V1.8*     *Yjz*      *20130916*   *对比上个版本，增加了4.1,修改了4.2的表格*
  *V1.9*     *yjz*      *20131226*   *对比上个版本，整体做了更新，便于也符合敏捷开发所用*
  *V2.0*     *Yjz*      *20150421*   *对比上个版本，去掉了整体场景等，属全面修改*
  *V2.1*     *Chenbo*   *20180305*   *增加4.5 国际化需求（必须考虑）。*
  *V2.2*     *Chenbo*   *20190612*   *增加4.6标准化接口*
  ---------- ---------- ------------ ------------------------------------------------------

目录

[1 介绍 5](#介绍)

[1.1 说明 5](#说明)

[1.2 文档目的 5](#文档目的)

[1.3 缩写和约定 5](#缩写和约定)

[1.4 参考和引用 5](#参考和引用)

[1.5 版本概要 5](#版本概要)

[2 用户需求概述 6](#用户需求概述)

[2.1 原始需求概述 6](#原始需求概述)

[2.2 核心需求分析 6](#核心需求分析)

[2.3 产品使用干系人用户需求分析 6](#产品使用干系人用户需求分析)

[2.4 公共模块、跨部门协作的功能点说明
7](#公共模块跨部门协作的功能点说明)

[3 详细用户需求规格 7](#详细用户需求规格)

[3.1 产品特性1 7](#产品特性1)

[3.1.1 特性概述 7](#特性概述)

[3.1.2 功能需求点1 7](#功能需求点1)

[**3.1.2.1** 客户存在的问题和原始需求 7](#客户存在的问题和原始需求)

[**3.1.2.2** 期望的操作步骤/特性用户场景 8](#期望的操作步骤特性用户场景)

[**一、** 主场景 8](#主场景)

[**二、** 备场景1 9](#备场景1)

[**三、** 备场景2 10](#备场景2)

[3.1.3 功能需求点2 10](#功能需求点2)

[3.2 自定义IPS/WAF规则（示例） 10](#自定义ipswaf规则示例)

[3.2.1 特性概述 10](#特性概述-1)

[3.2.2 自定义WAF规则 11](#自定义waf规则)

[**3.2.2.1** 客户存在的问题和原始需求 11](#客户存在的问题和原始需求-1)

[**3.2.2.2** 期望的操作步骤/特性用户场景
11](#期望的操作步骤特性用户场景-1)

[**一、** 主场景 12](#主场景-1)

[**二、** 备场景1 13](#备场景1-1)

[**二、** 备场景2 14](#备场景2-1)

[**三、** 备场景3 14](#备场景3)

[3.2.3 自定义IPS规则 14](#自定义ips规则)

[4 非功能性需求 14](#非功能性需求)

[4.1 性能 14](#性能)

[4.1.1 和上个版本的对比 14](#和上个版本的对比)

[4.1.2 参数需求 15](#参数需求)

[4.2 稳定性需求 15](#稳定性需求)

[4.3 报表需求 15](#报表需求)

[4.4 升级降级需求 16](#升级降级需求)

[4.5 国际化需求（必须考虑） 16](#国际化需求必须考虑)

[4.6 标准化接口 16](#标准化接口)

介绍
====

说明
----

**模板中现有的黑体字和文档结构必须保留、有内容可写的章节斜体字可以删除，无内容可写的章节需保留斜体字。
所有定义的需求，必须是正常黑色字。**

用户需求文档一般由产品规划经理/主管撰写，目的是让最接近客户的人员写出最符合客户实际的客户原始需求和客户典型使用场景，为后续的系统需求分析提供依据。

**用户需求文档输入**：需求规划表。规划表、用户需求、系统需求、需求矩阵几个文档之间，所说的同一个**需求点，名称要一致**，以方便需求跟踪和评审。

**用户需求文档输出**：客户的原始需求、客户的典型使用场景

文档目的
--------

客户可见的内容，为后续的系统需求分析提供原始依据。

缩写和约定
----------

解释本文档中使用的所有专用名词和缩略语。

参考和引用
----------

列出本文档所使用的参考资料和参考文档名。列举出尽量详细的信息。

版本概要
--------

概要描述开发该版本的目的、意图、背景

用户需求概述
============

原始需求概述
------------

*结合规划表里的内容以及上面的整体场景来写。此处再次列出是为了方便需求分析和评审。
*

  ----------- ------------------ -------- -------- -------- ------------
  产品特性    满足什么原始需求   优先级   使用者   工作量   需求来源？
  产品特性A                      高                高       XX银行
  产品特性B                      高                高       市场ccc
  产品特性C                      低                中       BBS建议
  ...                                                       
  ----------- ------------------ -------- -------- -------- ------------

核心需求分析
------------

*上述高优先级的特性里，分析出此版本的重点核心功能需求是什么,价值点在哪里，客户为什么会买单。
主要目的是为了识别核心需求、便于后续对这块进行重点保证。*

产品使用干系人用户需求分析 
---------------------------

  --------------------------------------------------------- ------------------------------------------
  干系人类型                                                有哪些诉求(失望和期望分析后得出)
  *网络管理员 (这是例子，下同。具体干系人以产品需求为准)*   *如配置易用*
  *客户的终端用户*                                          *如操作便捷，易上手，容易操作，提示清晰*
  *客户决策人*                                              *如体现效益报告等报表。*
  *深信服CEO*                                               *如PACC方面的使用效果要求*
  --------------------------------------------------------- ------------------------------------------

公共模块、跨部门协作的功能点说明
--------------------------------

*例如SC中心端、SNMP等公共部分一定要由公共技术部门来修改维护。 *

*凡是此类需求点牵涉到改动的，下面的"详细用户需求规格"中针对此特性的定义，要和对方部门的产品专家进行沟通。
在此说明和谁确认过此**用户需求方案**即可。*

公共模块矩阵的路径如下。撰写人在完成下面内容前，先到此路径确认，并和对方部门沟通：

svn://200.200.0.40/pr/pr/CommonProject/公共模块更新记录/公共模块使用情况及更新记录.xlsx

svn://200.200.0.4/pr/pr/CommonProject/公共模块更新记录/公共模块使用情况及更新记录.xlsx

  -------------- -------------- ------------------------------------------
  模块 or 特性   原产出部门     本文档的用户需求，和该部门哪位专家确认了
  *SC中心端*     *公共技术部*   *张三*
  *...*          *...*          *...*
                                
  -------------- -------------- ------------------------------------------

详细用户需求规格
================

产品特性1
---------

### 特性概述

*描述该特性的概要信息。 3.2章节有示例，下同。*

### 功能需求点1

#### 客户存在的问题和原始需求

存在的问题：*没这个功能/特性前，客户当前存在什么问题，怎么处理的*

使用者及原始需求：*就这个存在的问题，客户（有此需求的最终使用者角色如网管、公司管理者等）要解决该问题到什么程度*

*注意：客户的原话不一定是原始需求，客户说的可能是解决方案。比如客户原始需求是提高可靠性和稳定性，但如果客户说要支持双机、支持bypass，客户说的就是解决方案，如果客户说的是解决方案，我们要分析有没有更好的解决方案。*

#### 期望的操作步骤/特性用户场景

*没我们产品的这个功能/特性前，客户**期望以什么样的场景步骤**来解决上面存在的问题。
是设想用户为解决这个问题或者达成某个目的,打算经过怎样的操作流，最后得到怎样的结果，描述的是整个一过程。
这些"设想"是基于规划人员对用户需求的理解和真实客户的反馈。*

*和整体场景的不同点在于，特性场景只针对肯定会用到此功能特性的典型客户，看他期望以什么环境，什么样的前置条件下做何种操作步骤，最后得到什么结果。*

*至少要按照模板样式详细写出一个主场景、一个异常场景，其它场景可用标题描述的形式进行叙述(要让人从这个描述就能知道这个场景，不能让人猜测)。*

*站在用户需求文档的角度，主场景是指在正常环境下，一般性的、常见的用户期望操作，以及得到的结果。*

*备场景(包括异常场景)则一般描述错误配置、异常环境下，客户期望的处理方式和过程。比如加密P2P怎么处理？P2P识别不出来怎么处理？正常应用被误判成P2P怎么处理？*

*场景以客户想要的正常步骤和异常情况为准。
例如导入、导出，不光要描述客户想得到的正常导入导出，还要体现正确性校验、异常处理、如何让客户反悔等，不能只列出一个主要的场景，不体现客户的可能有的操作。*

#### 主场景 

【*场景标题】xxxx*

-   部署环境和主要应用

*此场景下设备的部署，前后端的设备情况，代理情况等信息。*

*可基于提出此需求的客户或者有可能用到此需求的客户情况来写。
部署方式需要与本用户场景明确对应。*

*另外还要说明用户主要的业务系统或者应用。*

-   背景流量内容和大小

*此场景的客户，其背景数据内容和流量大小*

-   配置情况

*此场景下的设备配置情况*

-   客户端信息

*终端用户的PC/PDA等设备的配置信息，如浏览器、OS、代理配置、域配置、杀毒软件、OA系统等*

-   相比竞争对手所具有的优势(或对比)

*结合上面的客户要解决什么问题，说明和竞争对手相比较，我们有哪些优势，或者劣势怎样的、如何弥补。*

-   场景步骤描述，及期望效果/带给客户的价值

*以客户要解决的问题为出发点，按他的期望步骤顺序1)、2)..描写出整个操作过程。*

*期望效果就是结合步骤，最后定义出客户想达到一个什么样的结果，带给客户什么价值，以及哪些原有功能绝对不能受影响。比如P2P封堵的实现效果是无论明文、还是加密，无论是已知的，还是未知的P2P，都能识别和封堵；对迅雷、flashget的流量能完全识别并封堵。*

#### 备场景1

【*场景标题】xxxx*

-   部署环境和主要应用

*此场景下设备的部署，前后端的设备情况，代理情况等信息。*

*可基于提出此需求的客户或者有可能用到此需求的客户情况来写。
部署方式需要与本用户场景明确对应。*

*另外还要说明用户主要的业务系统或者应用。*

-   背景流量内容和大小

*此场景的客户，其背景数据内容和流量大小*

-   配置情况

*此场景下的设备配置情况*

-   客户端信息

*终端用户的PC/PDA等设备的配置信息，如浏览器、OS、代理配置、域配置、杀毒软件、OA系统等*

-   相比竞争对手所具有的优势(或对比)

*结合上面的客户要解决什么问题，说明和竞争对手相比较，我们有哪些优势，或者劣势怎样的、如何弥补。*

-   场景步骤描述，及期望效果/带给客户的价值

*以客户要解决的问题为出发点，按他的期望步骤顺序1)、2)..描写出整个操作过程。*

*期望效果就是结合步骤，最后定义出客户想达到一个什么样的结果，带给客户什么价值，以及哪些原有功能绝对不能受影响。比如P2P封堵的实现效果是无论明文、还是加密，无论是已知的，还是未知的P2P，都能识别和封堵；对迅雷、flashget的流量能完全识别并封堵*

#### 备场景2 

【*场景标题】xxxx*

......

*多个备场景(包括异常场景)时，可在【场景标题】处可用简述的方式概括描述，其它部分不写了，但最好覆盖分析到的所有场景。
*

*要求在看到"场景标题"内容时，能让评审人和系统需求撰写人一眼就明白场景所隐含的环境、步骤及结果信息。*

### 功能需求点2

......

自定义IPS/WAF规则（示例）
-------------------------

**这是一个例子，仅供参考。**

### 特性概述

*描述该特性的概要信息。 *

支持自定义IPS/WAF规则，满足客户自身特定安全业务的需求。

### 自定义WAF规则

#### 客户存在的问题和原始需求

存在的问题：*没我们产品的这个功能/特性前，客户那里当前存在什么问题。*

无法自定义WAF规则，做不到根据自身安全业务快速实现规则更新。

使用者及原始需求：*就这个存在的问题，客户（有此需求的最终使用者角色如网管、公司管理者等）要解决该问题到什么程度。*

*注意：客户的原话不一定是原始需求，客户说的可能是解决方案。比如客户原始需求是提高可靠性和稳定性，但如果客户说要支持双机、支持bypass，客户说的就是解决方案，如果客户说的是解决方案，我们要分析有没有更好的解决方案。*

发现存在的问题和业务安全性需求，网络管理员可自定义WAF规则，并引用自定义规则。
引用后规则能立即生效，能起到WAF防护的作用

#### 期望的操作步骤/特性用户场景

*没我们产品的这个功能/特性前，客户**期望以什么样的场景步骤**来解决上面存在的问题。
是设想用户为解决这个问题或者达成某个目的,打算经过怎样的操作流，最后得到怎样的结果，描述的是整个一过程。
这些"设想"是基于对规划人员对用户需求的理解和真实客户的反馈。*

*和整体场景的不同点在于，特性场景只针对肯定会用到此功能特性的典型客户，看他期望以什么环境，什么样的前置条件下做何种操作步骤，最后得到什么结果。*

*至少要按照模板样式详细写出一个主场景、一个异常场景，其它场景可用标题描述的形式进行叙述(要让人从这个描述就能知道这个场景，不能让人猜测)。*

*站在用户需求文档的角度，主场景是指在正常环境下，一般性的、常见的用户期望操作，以及得到的结果。*

*备场景(包括异常场景)则一般描述错误配置、异常环境下，客户期望的处理方式和过程。比如加密P2P怎么处理？P2P识别不出来怎么处理？正常应用被误判成P2P怎么处理？*

*场景以客户想要的正常步骤和异常情况为准。
例如导入、导出，不光要描述客户想得到的正常导入导出，还要体现正确性校验、异常处理、如何让客户反悔等，不能只列出一个主要的场景，不体现客户的可能有的操作。*

#### 主场景

【*场景标题】自定义WAF规则阻断百度爬虫*

-   部署环境和主要应用

*此场景下设备的部署，前后端的设备情况，代理情况等信息。*

*可基于提出此需求的客户或者有可能用到此需求的客户情况来写。
部署方式需要与本用户场景明确对应。*

*另外还要说明用户主要的业务系统或者应用。*

使用Linux操作系统和Apache 2.1在服务器的80端口发布WEB应用；

路由模式，双机；

设备前接路由器。

-   背景流量内容和大小

*此场景的客户，其背景数据内容和流量大小*

WEB应用流量大小100Mb/s（模拟中型网站）；

纯HTTP应用。

-   配置情况

*此场景下的设备配置情况*

开启FW、IPS和WAF；

引导所有流量经过AF，其它配置为默认配置。

-   客户端信息

*终端用户的PC/PDA等设备的配置信息，如浏览器、OS、代理配置、域配置、杀毒软件、OA系统等*

不涉及

-   相比竞争对手所具有的优势(或对比)

*结合上面的客户要解决什么问题，说明和竞争对手相比较，我们有哪些优势，或者劣势怎样的、如何弥补。*

(此例中略)

-   场景步骤，及期望效果/带给客户的价值

*以客户要解决的问题为出发点，按他的期望步骤顺序1)、2)..描写出整个操作过程。*

*期望效果就是结合步骤，最后定义出客户想达到一个什么样的结果，带给客户什么价值，以及哪些原有功能绝对不能受影响。比如P2P封堵的实现效果是无论明文、还是加密，无论是已知的，还是未知的P2P，都能识别和封堵；对迅雷、flashget的流量能完全识别并封堵。*

1.  网关管理员A分析百度爬虫特征（比如可以用网上搜索百度官网公布出来的其爬虫User-Agent字段列表，将其作为自定义规则的特征串）

2.  A在专门的WAF自定义规则页面按模板和上步的分析结果自定义规则

3.  A在WAF策略配置页面新增策略，并引用上面自定义的规则

4.  查看效果，A能够在数据中心的WAF日志页面看到记录了阻断百度爬虫的日志，也可在服务器的访问日志上也看不到百度爬虫的访问记录。

#### 备场景1

【*场景标题*】自定义规则里匹配字符串长度小于5

-   部署环境和主要应用

(只是模板实例，此场景中略)

-   背景流量内容和大小

(只是模板实例，此场景中略)

-   配置情况

(只是模板实例，此场景中略)

-   客户端信息

(只是模板实例，此场景中略)

-   相比竞争对手所具有的优势(或对比)

(只是模板实例，此场景中略)

-   场景步骤，及期望效果/带给客户的价值

1.)
在专门的WAF自定义规则页面按模板自定义规则，期望字段包括名称、描述、等级、动作、匹配字符串、匹配正则表达式等内容

2.) 输入自定义规则的匹配模式串时，如果输入长度小于等于5

3.) 最后效果是前端程序需要检查用户输入的合理性，给出长度小的提示

*多个备场景(包括异常场景)时，可在"场景标题"处可用简述的方式概括描述，其它部分可以删除不写，但不能遗漏场景。
*

*要求在看到"场景标题"内容时，能让评审人和系统需求撰写人一眼就明白场景所隐含的环境、步骤及结果信息。*

#### 备场景2

【*场景标题】配置自定义WAF规则的时候，字符串和正则表单式客户能自由选择是否对大小写敏感*

#### 备场景3 

......

### 自定义IPS规则

......

非功能性需求
============

性能
----

### 和上个版本的对比

*在此说明和上个版本相比较, 哪些参数有变化,"变化"指的是升高或降低。 *

*具体数据，在下面章节的表格里按模板体现。
即便*无变化者，也需提供上个版本关键和基本的性能参数值。

### 参数需求

*需要描述什么场景配置下的性能参数，用户期望的性能参数，我们预计能达到的性能参数。
即便无变化者，也需提供上个版本关键和基本的性能参数值。*

+-----------------+-----------------+-----------------+-----------------+
| 评测场景        | 参数,           | 估计能达到的值  | 上个版本的值(必填) |
|                 | 及用户期望的值  |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| *\[网络环境\]*  | *并发连接数：*  |                 |                 |
| *路由模式*      |                 |                 |                 |
|                 | *http1.0为6W*   |                 |                 |
| *\[配置\]*      |                 |                 |                 |
| *开启xx功能，其它功能为默认 |     |                 |                 |
| *               |                 |                 |                 |
|                 |                 |                 |                 |
| *\[评测的场景步骤\]* |            |                 |                 |
|                 |                 |                 |                 |
|                 |                 |                 |                 |
| *使用思博伦进行测试；每项至少 |   |                 |                 |
| 验证3次，且不出现失败事务；* |    |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+

稳定性需求
----------

*指产品或者系统在一定时间内、在一定条件下无故障地执行指定功能的能力或可能性。
可通过可靠度、失效率、平均无故障间隔来衡量产品可靠性。*

*如果在定量上无法给出，可用定性的方式定义出稳定性参数，或者给出最低下限，比如最多每周重启一次xx服务。*

报表需求
--------

*用户想看到什么样的效果报表数据，我们以什么样的方式呈现提供，体现用户的投资回报比，体现产品的价值*

升级降级需求
------------

*支持从什么版本升级降级等*

国际化需求（必须考虑）
----------------------

*尤其是新产品。
如果确定不去海外推广的，可以先不出英文版本，但架构、UI框架、语言包这些，需规划好，并且落实到设计的时候考虑和体现好。*

*并不是指每个新产品都马上要做国际化，而是在做设计的时候考虑未来国际化的扩展性。*

*比如语言的支持就要考虑到中文和英文的支持扩展性（如采用资源包的形式）
。相关的系统日志统一用英文，避免后续需要修改日志的内容。*

*界面设计的时候，需要考虑英语的使用习惯，和一致性。*

*一些基于云的基础架构，需要考虑国际市场上多数据中心，以及各个区域不同合规性对云的影响（比如GDPR或者网络安全法要求的公民数据不出境）*

标准化接口
----------

*根据规划表以及以上场景的需求，在下表中列出此版本需要实现的标准化接口的需求，包括但不限于跟公司其他产品或第三方产品对接的接口需求，日志接口需求等接口需求，说明*

  ------------------------ -------------------------------------------------------------------------------------------------------------
  标准化接口需求/功能      详细说明
  *实现OAuth2.0认证接口*   *作为认证服务器对外提供认证服务，支持OAuth2.0的4种认证方式，包括密码模式、授权码模式、简化模式和客户端模式*
                           
                           
  ------------------------ -------------------------------------------------------------------------------------------------------------
